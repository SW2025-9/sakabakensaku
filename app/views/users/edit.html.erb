<div class="form-container">
  <h2>ユーザー情報の編集</h2>

  <%= form_with model: @user, local: true, class: "custom-form" do |f| %>

    <% if @user.errors.any? %>
      <div class="error-messages" style="color: red; background: #ffebeb; padding: 10px; border: 1px solid #ffcccc; border-radius: 4px; margin-bottom: 20px;">
        <h3 style="font-size: 1rem; margin-top: 0;"><%= @user.errors.count %>件のエラーがあります:</h3>
        <ul style="margin-bottom: 0;">
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label :uid, 'ユーザ名', class: "form-label" %>
      <%= f.text_field :uid, class: "form-input" %>
    </div>
    
    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px dashed #ccc;">
      <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">
        ※パスワードを変更する場合のみ入力してください
      </p>

      <div class="form-group">
        <%= f.label :password, '新しいパスワード', class: "form-label" %>
        <%= f.password_field :password, class: "form-input", placeholder: "変更しない場合は空欄" %>
      </div>

      <div class="form-group">
        <%= f.label :password_confirmation, 'パスワード(確認)', class: "form-label" %>
        <%= f.password_field :password_confirmation, class: "form-input", placeholder: "もう一度入力" %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :city, '所在地', class: "form-label" %>
      <%= f.text_field :city, class: "form-input" %>
    </div>

    <div class="form-submit" style="display: flex; gap: 10px; justify-content: center;">
      <%= f.submit '更新する', class: "submit-btn" %>
      
      <%# 戻るボタン %>
      <%= link_to '戻る', user_path(@user), class: "submit-btn", style: "text-decoration: none; background: #eee; color: #333; text-align: center; display: inline-block;" %>
    </div>

  <% end %>
</div>
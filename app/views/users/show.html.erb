<div class="top-container">
  <%# ヘッダー %>
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2><%= @user.uid %> さんのマイページ</h2>
    
    <%# --- 編集ボタン（本人のみ表示） --- %>
    <% if current_user == @user %>
      <%= link_to '情報を編集する', edit_user_path(@user), class: "edit-btn", style: "text-decoration: none; padding: 8px 16px; background: #f9f9f9; border: 1px solid #ccc; color: #333; border-radius: 4px;" %>
    <% end %>
  </div>

  <%# ユーザー情報 %>
  <div class="user-info" style="margin-bottom: 30px; padding: 15px; background: #fff; border: 1px solid #ddd; border-radius: 5px;">
    <p><strong>所在地:</strong> <%= @user.city %></p>
  </div>

  <hr class="divider">

  <%# --- 登録した店舗一覧 --- %>
  <h3>登録した酒場リスト</h3>
  
  <% if @my_shops.present? %>
    <div class="shop-list">
      <% @my_shops.each do |shop| %>
        <div class="shop-card" style="padding: 10px; border: 1px solid #eee; margin-bottom: 10px; display: flex; align-items: center; gap: 15px;">
          
          <%# 画像 %>
          <div style="width: 80px; height: 60px; background: #eee; display: flex; align-items: center; justify-content: center;">
             <% if shop.image.attached? %>
               <%= image_tag shop.image, style: "width: 100%; height: 100%; object-fit: cover;" %>
             <% else %>
               <span style="font-size: 0.8rem; color: #999;">No Img</span>
             <% end %>
          </div>

          <%# 店舗名（詳細ページへのリンク） %>
          <div>
            <%= link_to shop.name, shop_path(shop), style: "font-size: 1.2rem; font-weight: bold; text-decoration: none; color: #333;" %>
            <div style="font-size: 0.9rem; color: #666;"><%= shop.city %></div>
          </div>

        </div>
      <% end %>
    </div>
  <% else %>
    <p>まだ登録した店舗はありません。</p>
    <%= link_to '店舗を新規登録する', new_shop_path, style: "color: blue; text-decoration: underline;" %>
  <% end %>

  <hr class="divider" style="margin: 30px 0;">

  <%# --- いいねした店舗一覧 --- %>
  <h3>いいねした酒場リスト</h3>

  <% if @liked_shops.present? %>
    <div class="shop-list">
      <% @liked_shops.each do |shop| %>
        <div class="shop-card" style="padding: 10px; border: 1px solid #eee; margin-bottom: 10px; display: flex; align-items: center; gap: 15px;">
          
          <%# 画像 %>
          <div style="width: 80px; height: 60px; background: #eee; display: flex; align-items: center; justify-content: center;">
             <% if shop.image.attached? %>
               <%= image_tag shop.image, style: "width: 100%; height: 100%; object-fit: cover;" %>
             <% else %>
               <span style="font-size: 0.8rem; color: #999;">No Img</span>
             <% end %>
          </div>

          <%# 店舗名と所在地 %>
          <div>
            <%= link_to shop.name, shop_path(shop), style: "font-size: 1.2rem; font-weight: bold; text-decoration: none; color: #333;" %>
            <div style="font-size: 0.9rem; color: #666;"><%= shop.city %></div>
          </div>

        </div>
      <% end %>
    </div>
  <% else %>
    <p>まだ「いいね」した店舗はありません。</p>
    <%= link_to '店舗を探しに行く', root_path, style: "color: blue; text-decoration: underline;" %>
  <% end %>

  <div style="margin-top: 30px; text-align: center;">
    <%= link_to "店舗一覧に戻る", root_path, class: "back-link", style: "padding: 10px 20px; background: #eee; text-decoration: none; color: #333; border-radius: 4px;" %>
  </div>

</div>